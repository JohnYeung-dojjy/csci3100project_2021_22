<!DOCTYPE html>
<html>

<head>
    <style>
        #css_table {
            display: table;
            width: 50%;
        }

        .css_tr {
            display: table-row;
        }

        .css_td {
            display: table-cell;
        }
    </style>
    <title>Admin page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-center">
        <ul class="navbar-nav">
            <li class="nav-item"><a onclick="displayAllUsernameAndID()" class="nav-link">All User account</a></li>
            <li class="nav-item"><a onclick="displayAllLeaderboard()" class="nav-link">LeaderBoard</a></li>
            <li class="nav-item"><a onclick="resetUserPasswordForm()" class="nav-link">Reset user password</a></li>
            <li class="nav-item"><a onclick="deleteGameplayRecordForm()" class="nav-link">Delete user gameplay</a></li>
            <li class="nav-item"><a onclick="deleteUserAccpuntForm()" class="nav-link">Delete user account</a></li>
        </ul>
    </nav>
    <hr>
    <div id="body" style="text-align:center;">

        <div id="welcome">
            <h1> Welcome admin.</h1>
            <h1>Please choose the operation at the navigation bar.</h1>
        </div>

        <div id="leaderboard" style="display: none;">
            <div class="css_tr">
                <div class="css_td">&emsp;Username&emsp;</div>
                <div class="css_td">&emsp;Score&emsp;</div>
            </div>
            <% for(let i=0; i<thisleaderboard.length; i++) {%>
                <div class="css_tr">
                    <div class="css_td">&emsp;<%= thisleaderboard[i].username %>&emsp;</div>
                    <div class="css_td">&emsp;<%= thisleaderboard[i].score %>&emsp;</div>
                </div>
                <%}%>
        </div>

        <div>
            <table id="allUsernameAndID" class="table" style="display: none;">
                <tr>
                    <th scope="col">Username</th>
                    <th scope="col">User ID</th>
                </tr>
                <% for(let i=0; i<thisallUsernameAndID.length; i++) {%>
                    <tr>
                        <th scope="col">
                            <%= thisallUsernameAndID[i].username %>
                        </th>
                        <th scope="col">
                            <%= thisallUsernameAndID[i]._id %>
                        </th>
                    </tr>
                    <%}%>
            </table>
        </div>
</body>

<script>
    function displayAllUsernameAndID() {
        document.getElementById("leaderboard").style.display = "none";
        document.getElementById("welcome").style.display = "none";
        document.getElementById("allUsernameAndID").style.display = "";
    }

    function insertRowToTable(id, valueOfCell1, valueOfCell2) {
        var table = document.getElementById(id);
        var row = table.insertRow(-1);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        cell1.innerHTML = valueOfCell1;
        cell2.innerHTML = valueOfCell2;
    }

    function displayAllLeaderboard() {
        document.getElementById("leaderboard").style.display = "";
        document.getElementById("welcome").style.display = "none";
        document.getElementById("allUsernameAndID").style.display = "none";
    }

    function insertRowToDivTable(id, valueOfCell1, valueOfCell2) {
        var table = document.getElementById(id);
        table.innerHTML = table.innerHTML +
            `   <div class="css_tr">
                    <div class="css_td">${valueOfCell1}</div>
                    <div class="css_td">${valueOfCell2}</div>
                </div>
            `;
    }

    function resetUserPasswordForm() {
        let newElement = '';
        newElement = newElement + '<h1>Reset User Password</h1>'
        newElement = newElement + '<form><div class="form-group row">'
        newElement = newElement + '<label for="inputUsername"  class="col-sm-2 col-form-label">Username :</label>'
        newElement = newElement + '<div class="col-sm-5"> <input class="form-control mx-sm-3 mb-2" type="text" id="inputUsername"></div>'
        newElement = newElement + '<div class="col-sm-3"><button type="button" onclick="resetUserPassword()">Submit</button></div>'
        newElement = newElement + '</div> </form>'
        document.querySelector("#body").innerHTML = newElement;
    }

    function resetUserPassword() {
        let input = document.querySelector("#inputUsername").value;
        if (input == '') {
            document.querySelector("#inputUsername").classList.add("is-invalid");
            return;
        }
        document.querySelector("#inputUsername").classList.remove("is-invalid");
        let text = "Reset password of user named " + input + " ?";
        if (confirm(text) == false) {
            return;
        }

        //not send request yet

        document.querySelector("form").reset();
    }

    function deleteGameplayRecordForm() {
        let newElement = '';
        newElement = newElement + "<h1>Delete user's gameplay</h1>"
        newElement = newElement + '<form><div class="form-group row">'
        newElement = newElement + '<label for="inputUsername"  class="col-sm-2 col-form-label">Username :</label>'
        newElement = newElement + '<div class="col-sm-5"> <input class="form-control mx-sm-3 mb-2" type="text" id="inputUsername"></div>'
        newElement = newElement + '<div class="col-sm-3"><button type="button" onclick="resetUserPassword()">Submit</button></div>'
        newElement = newElement + '</div> </form>'
        document.querySelector("#body").innerHTML = newElement;
    }

    function deleteGameplayRecord() {
        let input = document.querySelector("#inputUsername").value;
        if (input == '') {
            document.querySelector("#inputUsername").classList.add("is-invalid");
            return;
        }
        document.querySelector("#inputUsername").classList.remove("is-invalid");
        let text = "Delete gameplay of user named " + input + " ?";
        if (confirm(text) == false) {
            return;
        }

        //not send request yet

        document.querySelector("form").reset();
    }

    function deleteUserAccpuntForm() {
        let newElement = '';
        newElement = newElement + "<h1>Delete user's account</h1>"
        newElement = newElement + '<form><div class="form-group row">'
        newElement = newElement + '<label for="inputUsername"  class="col-sm-2 col-form-label">Username :</label>'
        newElement = newElement + '<div class="col-sm-5"> <input class="form-control mx-sm-3 mb-2" type="text" id="inputUsername"></div>'
        newElement = newElement + '<div class="col-sm-3"><button type="button" onclick="resetUserPassword()">Submit</button></div>'
        newElement = newElement + '</div> </form>'
        document.querySelector("#body").innerHTML = newElement;

    }

    function deleteUserAccpunt() {
        let input = document.querySelector("#inputUsername").value;
        if (input == '') {
            document.querySelector("#inputUsername").classList.add("is-invalid");
            return;
        }
        document.querySelector("#inputUsername").classList.remove("is-invalid");
        let text = "Delete account of user named " + input + " ?";
        if (confirm(text) == false) {
            return;
        }

        //not send request yet

        document.querySelector("form").reset();
    }

</script>

</html>